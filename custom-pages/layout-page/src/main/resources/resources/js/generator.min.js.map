{"version":3,"sources":["js/generator.module.js","js/i18n/i18n.module.js","forms-generic-errors.js","js/directives/pbModel.js","js/directives/pbPropertyValues.js","js/directives/uiTranslate.directive.js","js/filters/uiTranslate.filter.js","js/generator.config.js","js/generator.run.js","js/i18n/i18n.service.js","js/services/bindingContextFactory.js","js/services/bindingsFactory.js","js/services/modelFactory.js","js/services/pendingStatus.js","js/services/widgetNameFactory.js"],"names":[],"mappings":"CAAA,WACA,YAEA,SAAA,OAAA,8BACA,QAAA,OAAA,6BACA,QAAA,OAAA,4BAAA,YACA,QAAA,OAAA,yBAAA,YACA,QAAA,OAAA,yBAAA,0BACA,QAAA,OAAA,+BAGA,QAAA,OAAA,iBACA,QAAA,OAAA,mBAEA,QAAA,OAAA,iBACA,aACA,aACA,WACA,0BACA,0BACA,yBACA,2BACA,wBACA,2BACA,aACA,oBCzBA,QAAA,OAAA,sBAAA,YAAA,YCAA,SAAA,GACA,IACA,EAAA,QAAA,OAAA,2BACA,MAAA,GACA,EAAA,QAAA,OAAA,8BAEA,EAAA,KAAA,iBAAA,SAAA,GACA,EAAA,IAAA,4BACA,0nBCRA,WACA,YAEA,SAAA,OAAA,4BACA,UAAA,WAAA,SAAA,eAAA,kBAAA,mBAAA,yBAAA,wBAAA,SAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAEA,QAAA,MASA,QAAA,GAAA,EAAA,GACA,OACA,IAAA,SAAA,EAAA,EAAA,EAAA,GACA,EAAA,KAAA,EAAA,IAAA,EAAA,SACA,IAAA,GAAA,EAAA,IAAA,EAAA,kBACA,IAAA,EAAA,QAAA,aACA,EAAA,OACA,EACA,EAAA,OAAA,EAAA,QAAA,YAAA,GACA,EAAA,cAMA,MAvBA,GAAA,UAAA,KAAA,SAAA,GACA,GAAA,GAAA,EAAA,OAAA,EACA,MAAA,cAAA,EAAA,cACA,KAAA,SAAA,WACA,MAAA,MAoBA,SAAA,IACA,WAAA,EAIA,aAAA,cAEA,OAAA,EACA,QAAA,SCvCA,WACA,YAEA,SAAA,OAAA,4BACA,UAAA,oBAAA,SAAA,KAAA,WAAA,OAAA,kBAAA,wBAAA,wBAAA,gBAAA,SAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAEA,QAAA,GAAA,EAAA,GACA,OACA,IAAA,SAAA,EAAA,EAAA,EAAA,GACA,GAAA,GAAA,EAAA,IAAA,EAAA,iBACA,GAAA,OACA,EACA,EAAA,OAAA,EAAA,GACA,EAAA,eAEA,EAAA,WAAA,QAAA,SAAA,GACA,QAAA,EAAA,IACA,aAAA,EAAA,GAAA,QACA,EAAA,GAAA,OAGA,EAAA,WAAA,QAAA,SAAA,GAEA,EAAA,IAAA,sBAAA,EAAA,mBAAA,EAAA,WAAA,GAEA,IAAA,GAAA,EAAA,QACA,EAAA,EAAA,OAAA,WACA,EAAA,WAGA,OAAA,GAAA,QAAA,KAAA,MAMA,OACA,SAAA,IACA,OAAA,EACA,QAAA,WACA,QAAA,SCxCA,WACA,YAEA,SAAA,OAAA,4BACA,UAAA,eAAA,WAAA,SAAA,GAEA,OACA,SAAA,IACA,UAAA,EACA,SAAA,IACA,QAAA,SAAA,EAAA,GAGA,MAFA,GAAA,KAAA,YAAA,IACA,EAAA,WAAA,iBAEA,KAAA,SAAA,EAAA,GACA,EAAA,GAAA,aCfA,WACA,YAEA,SAAA,OAAA,yBAEA,OAAA,eAAA,UAAA,SAAA,GACA,MAAA,GAAA,mBCNA,WAEA,YAEA,SAAA,OAAA,iBACA,QAAA,gBAAA,SAAA,GACA,EAAA,aAAA,KAAA,iCCNA,QAAA,OAAA,iBAAA,SAAA,KAAA,sBACA,QAAA,OAAA,iBAAA,KAAA,OAAA,SAAA,GACA,EAAA,UCFA,QAAA,OAAA,sBAAA,QAAA,QAAA,iBAAA,WAAA,UAAA,WAAA,aAAA,SAAA,EAAA,EAAA,GAWA,QAAA,GAAA,GACA,MAAA,GAAA,OAAA,SAAA,EAAA,GACA,MAAA,GAAA,IAAA,GACA,GAXA,GAAA,KACA,GAAA,UACA,GAAA,UACA,GAAA,UACA,GAAA,UACA,GAAA,UACA,MAAA,SAQA,QACA,KAAA,WAEA,GAAA,GAAA,EAAA,EAAA,YACA,EAAA,UAAA,UACA,EAAA,UAAA,cACA,QAEA,GAAA,mBAAA,GACA,EAAA,WAAA,sCC1BA,WACA,YAEA,SAAA,KAEA,QAAA,GAAA,GACA,OACA,OAAA,SAAA,EAAA,GAGA,MAFA,GAAA,YAAA,EACA,OAAA,eAAA,EAAA,EAAA,GACA,OAKA,QAAA,GAAA,EAAA,GACA,GAAA,GAAA,EAAA,eA0BA,OAxBA,GAAA,GAEA,KAAA,SACA,IAAA,WACA,MAAA,GAAA,OAEA,IAAA,SAAA,GACA,EAAA,cACA,EAAA,YAAA,EAAA,QAAA,MAKA,KAAA,UACA,IAAA,WACA,MAAA,GAAA,UAIA,KAAA,SACA,IAAA,WACA,MAAA,GAAA,SAGA,EAGA,OACA,OAAA,GAIA,QACA,OAAA,0BACA,QAAA,wBAAA,MCpDA,WACA,YASA,SAAA,GAAA,EAAA,GAUA,QAAA,GAAA,EAAA,EAAA,GAEA,QAAA,GAAA,GACA,GAAA,GAAA,EAAA,EACA,QACA,IAAA,WACA,MAAA,GAAA,IAEA,IAAA,SAAA,GACA,EAAA,QACA,EAAA,OAAA,EAAA,IAGA,YAAA,GAIA,QAAA,GAAA,GACA,GAAA,GAAA,EAAA,EACA,QACA,IAAA,WACA,MAAA,GAAA,IAEA,YAAA,GAIA,QAAA,GAAA,GACA,OACA,IAAA,WACA,MAAA,GAAA,GAAA,IAAA,IAEA,YAAA,GAIA,QAAA,GAAA,GACA,OACA,IAAA,WACA,MAAA,IAEA,YAAA,GAIA,GAAA,IACA,SAAA,EACA,WAAA,EACA,cAAA,EACA,SAAA,EAGA,QAAA,KAAA,GAAA,QAAA,SAAA,GACA,GAAA,GAAA,EAAA,EACA,QAAA,eAAA,EAAA,EAAA,EAAA,EAAA,MAAA,EAAA,MAAA,MAIA,OACA,OAAA,GAGA,EAAA,SAAA,eAAA,UAEA,QAAA,OAAA,0BACA,QAAA,kBAAA,MCrFA,WACA,YAEA,SAAA,GAAA,EAAA,EAAA,EAAA,GAEA,QAAA,GAAA,EAAA,EAAA,GACA,EAAA,GAAA,EAAA,OAAA,OAGA,QAAA,GAAA,EAAA,EAAA,GACA,EAAA,GAAA,KAAA,MAAA,EAAA,OAGA,QAAA,GAAA,EAAA,EAAA,GAGA,GAAA,GAAA,EAAA,GAAA,UAAA,QAAA,gBAAA,EAAA,MAEA,QAAA,eAAA,EAAA,GACA,IAAA,WACA,IACA,GAAA,GAAA,EAAA,EAIA,OAHA,SAAA,OAAA,EAAA,KACA,EAAA,GAEA,EACA,MAAA,GACA,EAAA,KAAA,qBAAA,EAAA,WAAA,EAAA,WAGA,YAAA,IAIA,QAAA,GAAA,EAAA,EAAA,GACA,GACA,GADA,EAAA,KAEA,GACA,GAAA,WACA,MAAA,MAAA,WAAA,KAAA,SAAA,GACA,OAAA,MACA,IAAA,mCACA,QAAA,SAAA,EAAA,EAAA,GACA,EAAA,SAAA,QAAA,OAAA,sBAAA,EAAA,0BAKA,QAAA,eAAA,EAAA,GACA,IAAA,WACA,GAAA,GAAA,EAAA,EAAA,OAAA,EAAA,MAAA,GAAA,EAUA,OARA,KAAA,GAAA,SAAA,IACA,EAAA,EACA,EAAA,QAAA,QAAA,WACA,EAAA,IAAA,GAAA,QAAA,SAAA,GACA,EAAA,OAIA,GAEA,YAAA,IAIA,QAAA,GAAA,EAAA,EAAA,GACA,QAAA,GAAA,EAAA,GACA,MAAA,WAAA,EAAA,QAAA,GAAA,QAAA,eAAA,UAAA,GAAA,QAAA,YAAA,QAAA,uBAAA,KAAA,OAGA,OAAA,eAAA,EAAA,GACA,IAAA,WACA,MAAA,GAAA,EAAA,OAAA,GAAA,EAAA,WAEA,YAAA,IAIA,GAAA,IACA,SAAA,EACA,SAAA,EACA,KAAA,EACA,WAAA,EACA,IAAA,EACA,aAAA,EAGA,QACA,OAAA,SAAA,GAEA,GAAA,GAAA,OAAA,KAAA,GAAA,OAAA,SAAA,EAAA,GACA,GAAA,GAAA,EAAA,EAEA,OADA,GAAA,EAAA,MAAA,EAAA,EAAA,GACA,MAkBA,OAfA,GAAA,cAAA,WACA,GAAA,KAYA,OAXA,QAAA,KAAA,GAAA,QAAA,SAAA,GACA,OAAA,eAAA,EAAA,GACA,IAAA,WACA,MAAA,GAAA,IAEA,IAAA,SAAA,GACA,EAAA,GAAA,GAEA,YAAA,MAGA,GAEA,IAIA,EAAA,SAAA,eAAA,QAAA,OAAA,aAEA,QAAA,OAAA,0BACA,QAAA,eAAA,MCvHA,WACA,YAEA,SAAA,GAAA,GAUA,QAAA,KACA,GAAA,EAGA,QAAA,KACA,GAAA,EAEA,IAAA,GACA,EAAA,QAAA,SAAA,GACA,MAKA,QAAA,KACA,MAAA,GAAA,EAGA,QAAA,GAAA,GAUA,MARA,GAAA,EAAA,OAAA,GAEA,EAAA,WACA,IAAA,GACA,KAEA,GAAA,GAEA,WACA,GAAA,GAAA,EAAA,QAAA,EACA,GAAA,EAAA,OAAA,SAAA,EAAA,GACA,MAAA,IAAA,KAxCA,GAAA,GAAA,EACA,IAEA,MAAA,kBAAA,EACA,KAAA,qBAAA,EACA,KAAA,UAAA,EAEA,KAAA,OAAA,EA2CA,QAAA,GAAA,EAAA,GAOA,QAAA,GAAA,GAIA,MAHA,QAAA,EAAA,QACA,EAAA,oBAEA,EAGA,QAAA,GAAA,GAIA,MAHA,GAAA,IACA,EAAA,uBAEA,EAGA,QAAA,GAAA,GAIA,MAHA,GAAA,IACA,EAAA,uBAEA,EAAA,OAAA,GAGA,QAAA,GAAA,GACA,MAAA,GAAA,QAAA,QAAA,EAAA,OAAA,OA5BA,OACA,QAAA,EACA,SAAA,EACA,cAAA,GAPA,EAAA,SAAA,YAmCA,EAAA,SAAA,KAAA,iBAEA,QACA,OAAA,0BACA,QAAA,gBAAA,GACA,QAAA,0BAAA,MC3FA,WACA,YAEA,SAAA,KAQA,QAAA,GAAA,GAOA,MANA,GAAA,eAAA,KACA,EAAA,GAAA,IAGA,EAAA,IAAA,EAEA,EAAA,EAAA,GAdA,GAAA,KAEA,QACA,QAAA,GAcA,QAAA,OAAA,0BACA,QAAA,oBAAA","file":"generator.min.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular.module('bonitasoft.ui.constants', []);\n  angular.module('bonitasoft.ui.services', []);\n  angular.module('bonitasoft.ui.directives', ['gettext']);\n  angular.module('bonitasoft.ui.filters', ['gettext']);\n  angular.module('bonitasoft.ui.widgets', ['bonitasoft.ui.filters']);\n  angular.module('bonitasoft.ui.extensions', []);\n\n  /* keep the former main module name for backward compatibility reasons*/\n  angular.module('pb.widgets', []);\n  angular.module('pb.generator', []);\n\n  angular.module('bonitasoft.ui', [\n    'ngSanitize',\n    'ngMessages',\n    'ngUpload',\n    'bonitasoft.ui.templates',\n    'bonitasoft.ui.constants',\n    'bonitasoft.ui.services',\n    'bonitasoft.ui.directives',\n    'bonitasoft.ui.widgets',\n    'bonitasoft.ui.extensions',\n    'pb.widgets',\n    'pb.generator'\n  ])\n})();\n\n","angular.module('bonitasoft.ui.i18n', ['ngCookies', 'gettext']);\n","(function(module) {\ntry {\n  module = angular.module('bonitasoft.ui.templates');\n} catch (e) {\n  module = angular.module('bonitasoft.ui.templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('forms-generic-errors.html',\n    '<div class=\"text-danger\" ng-message=\"required\">{{ \\'This field is required\\'Â | uiTranslate}}</div>\\n' +\n    '<div class=\"text-danger\" ng-message=\"minlength\">{{ \\'This field length should be larger\\' | uiTranslate }}</div>\\n' +\n    '<div class=\"text-danger\" ng-message=\"maxlength\">{{ \\'This field length should be smaller\\' | uiTranslate }}</div>\\n' +\n    '<div class=\"text-danger\" ng-message=\"min\">{{ \\'This value is too small\\' | uiTranslate }}</div>\\n' +\n    '<div class=\"text-danger\" ng-message=\"max\">{{ \\'This value is too large\\' | uiTranslate }}</div>\\n' +\n    '<div class=\"text-danger\" ng-message=\"email\">{{ \\'This is not a valid email\\' | uiTranslate }}</div>\\n' +\n    '');\n}]);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('bonitasoft.ui.directives')\n    .directive('pbModel', ['$parse', 'modelFactory', 'bindingsFactory', 'dataModelFactory', 'modelPropertiesFactory', 'bindingContextFactory', function ($parse, modelFactory, bindingsFactory, dataModelFactory, modelPropertiesFactory, bindingContextFactory) {\n\n      function PbModelCtrl() {}\n      PbModelCtrl.prototype.fill = function (rawData) {\n        var model = modelFactory.create(rawData);\n        this.createGateway = model.createGateway;\n        this.getModel = function() {\n          return model;\n        };\n      };\n\n      function pbModelCompile(tElement, tAttributes) {\n        return {\n          pre: function (scope, element, attrs, pbModelCtrl) {\n            pbModelCtrl.fill(dataModelFactory.get(tAttributes.pbModel));\n            var pbModelProperties = modelPropertiesFactory.get(tAttributes.pbModelProperties);\n            if(pbModelProperties && scope.$parent.pbModelCtrl) {\n              bindingsFactory.create(\n                pbModelProperties,\n                bindingContextFactory.create(scope.$parent.pbModelCtrl, scope),\n                pbModelCtrl.getModel());\n            }\n          }\n        }\n      }\n\n      return {\n        restrict: 'A',\n        controller: PbModelCtrl,\n        // Expose controller to the scope to mask parent one.\n        // Every time a model is created then it mask its parent\n        // model allowing nested model\n        controllerAs: 'pbModelCtrl',\n        // This is why we use a new scope. To avoid overriding parent modelCtrl.\n        scope: true,\n        compile: pbModelCompile\n      }\n    }]);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('bonitasoft.ui.directives')\n    .directive('pbPropertyValues', ['$parse', '$q', '$timeout', '$log', 'bindingsFactory', 'propertyValuesFactory', 'bindingContextFactory', 'pendingStatus', function ($parse, $q, $timeout, $log, bindingsFactory, propertyValuesFactory, bindingContextFactory, pendingStatus) {\n\n      function pbPropertyValuesCompile(tElement, tAttributes) {\n        return {\n          pre: function ($scope, elem, attr, pbModelCtrl) {\n            var pbPropertyValues = propertyValuesFactory.get(tAttributes.pbPropertyValues);\n            bindingsFactory.create(\n              pbPropertyValues,\n              bindingContextFactory.create(pbModelCtrl, $scope),\n              $scope.properties = {});\n\n            $scope.properties.isBound = function (propertyName) {\n              return !!pbPropertyValues[propertyName] &&\n                pbPropertyValues[propertyName].type === 'variable' &&\n                !!pbPropertyValues[propertyName].value;\n            };\n\n            $scope.properties.waitFor = function(propertyName){\n              // This comment is mandatory to force variable resolution\n              $log.log('resolving property ', propertyName,' Current value: ', $scope.properties[propertyName]);\n\n              var defer = $q.defer();\n              var removeFn = pendingStatus.listen(function(){\n                defer.resolve();\n              });\n\n              return defer.promise.then(removeFn);\n            };\n          }\n        };\n      }\n\n      return {\n        restrict: 'A',\n        scope: true,\n        require: '^pbModel',\n        compile: pbPropertyValuesCompile\n      };\n    }]);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('bonitasoft.ui.directives')\n    .directive('uiTranslate', ['$compile', function ($compile) {\n\n      return {\n        restrict: 'A',\n        terminal: true, // make sure other directives won't be compiled\n        priority: 1000, // make sure we run first\n        compile: function (tElement, tAttrs) {\n          tAttrs.$set('translate', '');\n          tElement.removeAttr(\"ui-translate\");\n          return {\n            post: function (scope, element) {\n              $compile(element)(scope);\n            }\n          };\n        }\n      };\n    }]);\n})();\n","(function () {\n  'use strict';\n\n  angular.module('bonitasoft.ui.filters')\n\n    .filter('uiTranslate', ['$filter', function ($filter) {\n      return $filter('translate');\n    }]);\n})();\n","(function () {\n\n  'use strict';\n\n  angular.module('bonitasoft.ui')\n    .config(['$httpProvider', function ($httpProvider) {\n      $httpProvider.interceptors.push('httpActivityInterceptor');\n    }]);\n\n})();\n","angular.module('bonitasoft.ui').requires.push('bonitasoft.ui.i18n');\nangular.module('bonitasoft.ui').run(['i18n', function(i18n) {\n  i18n.init();\n}]);\n","angular.module('bonitasoft.ui.i18n').factory('i18n', ['gettextCatalog', '$cookies', '$window', '$timeout', '$rootScope', function (gettextCatalog, $cookies, $window, $timeout, $rootScope) {\n\n  // Portal locales normalized into standard locales\n  var normalization = [\n    {'fr': 'fr-FR'},\n    {'en': 'en-US'},\n    {\"es\": 'es-ES'},\n    {\"it\": 'it-IT'},\n    {\"de\": 'de-DE'},\n    {\"pt_BR\": 'pt-BR'}];\n\n  function normalize(locale) {\n    return normalization.reduce(function (acc, language) {\n      return language[acc] || acc;\n    }, locale);\n  }\n\n  return {\n    init: function init() {\n\n      var language = normalize($cookies.BOS_Locale\n        || $window.navigator.language\n        || $window.navigator.userLanguage // IE\n        || 'en-US');\n\n      gettextCatalog.setCurrentLanguage(language);\n      gettextCatalog.loadRemote(\"assets/json/localization.json\");\n    }\n  }\n}]);\n","(function () {\n  'use strict';\n\n  function bindingContextFactory() {\n\n    function expand(context) {\n      return {\n        \"with\": function (name, accessors) {\n          accessors.enumerable = true;\n          Object.defineProperty(context, name, accessors);\n          return this;\n        }\n      };\n    }\n\n    function createContext(modelCtrl, scope) {\n      var context = modelCtrl.createGateway();\n\n      expand(context)\n\n        .with('$item', {\n          get: function () {\n            return scope.$item;\n          },\n          set: function (value) {\n            if (scope.$collection) {\n              scope.$collection[scope.$index] = value;\n            }\n          }\n        })\n\n        .with('$index', {\n          get: function () {\n            return scope.$index;\n          }\n        })\n\n        .with('$form', {\n          get: function () {\n            return scope.$form;\n          }\n        });\n      return context;\n    }\n\n    return {\n      create: createContext\n    }\n  }\n\n  angular\n    .module('bonitasoft.ui.services')\n    .factory('bindingContextFactory', bindingContextFactory);\n})();\n","(function () {\n  'use strict';\n\n  /**\n   * Factory to create bindings associating properties (also known as properties) to the model.\n   *\n   * @param $interpolate\n   * @param $parse\n   * @returns {{create: createBindings}}\n   */\n  function bindingsFactory($interpolate, $parse) {\n\n    /**\n     * Define destination properties allowing to\n     * access the context object as described in properties.\n     *\n     * @param properties - also known as properties. { type: <data | constant>, value: <expression> }\n     * @param context - against which property.value expression will be executed.\n     * @param destination - object where to bind the resulting properties.\n     */\n    function createBindings(properties, context, destination) {\n\n      function createVariable(propertyValue) {\n        var getter = $parse(propertyValue);\n        return {\n          get: function () {\n            return getter(context);\n          },\n          set: function (value) {\n            if (getter.assign) {\n              getter.assign(context, value);\n            }\n          },\n          enumerable: true\n        };\n      }\n\n      function createExpression(propertyValue) {\n        var getter = $parse(propertyValue);\n        return {\n          get: function () {\n            return getter(context);\n          },\n          enumerable: true\n        }\n      }\n\n      function createInterpolation(propertyValue) {\n        return {\n          get: function () {\n            return $interpolate(propertyValue ||Â '')(context);\n          },\n          enumerable: true\n        };\n      }\n\n      function createConstant(propertyValue) {\n        return {\n          get: function () {\n            return propertyValue;\n          },\n          enumerable: true\n        }\n      }\n\n      var bonds = {\n        'variable': createVariable,\n        'expression': createExpression,\n        'interpolation': createInterpolation,\n        'constant': createConstant\n      };\n\n      Object.keys(properties).forEach(function (name) {\n        var property = properties[name];\n        Object.defineProperty(destination, name, bonds[property.type](property.value, name));\n      });\n    }\n\n    return {\n      create: createBindings\n    }\n  }\n  bindingsFactory.$inject = ['$interpolate', '$parse'];\n\n  angular.module('bonitasoft.ui.services')\n    .factory('bindingsFactory', bindingsFactory);\n})();\n","(function () {\n  'use strict';\n\n  function modelFactory($interpolate, $http, $log, $location) {\n\n    function resolveVariable(dataModel, descriptor, name) {\n      dataModel[name] = descriptor.value || undefined;\n    }\n\n    function resolveJson(dataModel, descriptor, name) {\n      dataModel[name] = JSON.parse(descriptor.value);\n    }\n\n    function resolveExpression(dataModel, descriptor, name) {\n\n      // use strict. Avoid pollution of the global object.\n      var expression = new Function('$data', '\"use strict\";' + descriptor.value), currentValue;\n\n      Object.defineProperty(dataModel, name, {\n        get: function () {\n          try {\n            var value = expression(dataModel);\n            if(!angular.equals(currentValue, value)) {\n              currentValue = value;\n            }\n            return currentValue;\n          } catch (e) {\n            $log.warn(\"Error evaluating <\", name, \"> data: \", e.message);\n          }\n        },\n        enumerable: true\n      });\n    }\n\n    function resolveUrl(dataModel, descriptor, name) {\n      var url = null;\n      var value;\n      var csrf = {\n        get promise() {\n          return this.$promise || (this.$promise = $http({\n            method: 'GET',\n            url: '../API/system/session/unusedId'\n          }).success(function(data, status, headers) {\n            $http.defaults.headers.common['X-Bonita-API-Token'] = headers('X-Bonita-API-Token');\n          }));\n        }\n      };\n\n      Object.defineProperty(dataModel, name, {\n        get: function () {\n          var currentUrl = $interpolate(descriptor.value, false, null, true)(dataModel);\n\n          if (currentUrl !== url && currentUrl !== undefined) {\n            url = currentUrl;\n            csrf.promise.finally(function() {\n              $http.get(url).success(function (data) {\n                value = data;\n              });\n            });\n          }\n          return value;\n        },\n        enumerable: true\n      });\n    }\n\n    function resolveUrlParameter(dataModel, descriptor, name) {\n      function extractUrlParameter(param, str) {\n        return decodeURI(str.replace(new RegExp(\"^(?:.*[&\\\\?]\" + encodeURI(param).replace(/[\\.\\+\\*]/g, \"\\\\$&\") + \"(?:\\\\=([^&]*))?)?.*$\", \"i\"), \"$1\"));\n      }\n\n      Object.defineProperty(dataModel, name, {\n        get: function () {\n          return extractUrlParameter(descriptor.value || '', $location.absUrl());\n        },\n        enumerable: true\n      });\n    }\n\n    var resolveMap = {\n      variable: resolveVariable,\n      constant: resolveVariable,\n      json: resolveJson,\n      expression: resolveExpression,\n      url: resolveUrl,\n      urlparameter: resolveUrlParameter\n    };\n\n    return {\n      create: function (data) {\n\n        var model = Object.keys(data).reduce(function(acc, name) {\n          var descriptor = data[name];\n          resolveMap[descriptor.type](acc, descriptor, name);\n          return acc;\n        }, {});\n\n        model.createGateway = function () {\n          var context = {};\n          Object.keys(model).forEach(function (property) {\n            Object.defineProperty(context, property, {\n              get: function () {\n                return model[property];\n              },\n              set: function (value) {\n                model[property] = value;\n              },\n              enumerable: true\n            });\n          });\n          return context;\n        };\n        return model;\n      }\n    };\n  }\n  modelFactory.$inject = ['$interpolate', '$http', '$log', '$location'];\n\n  angular.module('bonitasoft.ui.services')\n    .factory('modelFactory', modelFactory);\n})();\n","(function () {\n  'use strict';\n\n  function pendingStatus($timeout) {\n    var pendingRequests = 0;\n    var listenners  = [];\n\n    this.addPendingRequest = addPendingRequest;\n    this.removePendingRequest = removePendingRequest;\n    this.isPending = isPending;\n\n    this.listen = listen;\n\n    function addPendingRequest() {\n      pendingRequests += 1;\n    }\n\n    function removePendingRequest() {\n      pendingRequests -= 1;\n\n      if (pendingRequests === 0) {\n        listenners.forEach(function(handler) {\n           handler();\n        });\n      }\n    }\n\n    function isPending() {\n      return pendingRequests > 0;\n    }\n\n    function listen(handler) {\n\n      listenners = listenners.concat(handler);\n\n        $timeout(function(){\n          if(pendingRequests === 0) {\n            handler();\n          }\n        }, 0, false);\n\n      return function(){\n        var index = listenners.indexOf(handler);\n        listenners = listenners.filter(function(fn, i){\n          return index != i;\n        });\n      };\n    }\n\n\n  }\n  pendingStatus.$inject = ['$timeout'];\n\n\n  function httpActivityInterceptor($q, pendingStatus){\n    return {\n      request: requestHandler,\n      response: responseHandler,\n      responseError: responseErrorHandler\n    };\n\n    function requestHandler(config) {\n      if( config.method === 'GET') {\n        pendingStatus.addPendingRequest();\n      }\n      return config;\n    }\n\n    function responseHandler(response) {\n      if (shouldRemovePendingRequest(response)) {\n        pendingStatus.removePendingRequest();\n      }\n      return(response);\n    }\n\n    function responseErrorHandler(response){\n     if (shouldRemovePendingRequest(response)) {\n      pendingStatus.removePendingRequest();\n     }\n     return $q.reject( response ) ;\n    }\n\n    function shouldRemovePendingRequest(response){\n      return  response.config && response.config.method === 'GET';\n    }\n  }\n  httpActivityInterceptor.$inject = ['$q', 'pendingStatus'];\n\n  angular\n    .module('bonitasoft.ui.services')\n    .service('pendingStatus', pendingStatus)\n    .service('httpActivityInterceptor', httpActivityInterceptor);\n\n})();\n","(function () {\n  'use strict';\n\n  function widgetNameFactory() {\n    var widgetsName = {};\n\n    return {\n      getName: getName\n    };\n\n\n    function getName(widget) {\n      if (!widgetsName.hasOwnProperty(widget)) {\n        widgetsName[widget] = -1;\n      }\n\n      widgetsName[widget] += 1 ;\n\n      return widget + widgetsName[widget];\n    }\n  }\n  angular.module('bonitasoft.ui.services')\n    .service('widgetNameFactory', widgetNameFactory);\n})();\n"],"sourceRoot":"/source/"}